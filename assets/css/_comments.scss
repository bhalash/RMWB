/**
 * Comments Template and Commentform
 * -----------------------------------------------------------------------------
 * @category   Stylesheet
 * @package    Sheepie
 * @author     Mark Grealish <mark@bhalash.com>
 * @copyright  Copyright (c) 2015 Mark Grealish
 * @license    https://www.gnu.org/copyleft/gpl.html The GNU General Public License v3.0
 * @version    3.0
 * @link       https://github.com/bhalash/sheepie
 */

/*
 * Reader Comments
 * -----------------------------------------------------------------------------
 * List of comments and top-level comment style.
 */

#comments {
    ul {
        margin: 0;
        padding: 0;
        position: relative;
    }

    p {
        @include margin(0.5, bottom);
    }
}

/**
 * Input Element Border
 * -----------------------------------------------------------------------------
 * Generically used several times. This is un/focused border style for
 * commentform inputs.
 */

%input-border {
    border: 1px solid palette(white, mid-dark);
    box-sizing: border-box;

    &:focus {
        border-color: palette(black);
    }
}

/**
 * Comment Area Miscellaneous Rules
 * -----------------------------------------------------------------------------
 */

h5.reply-title {
    /* Bold black text dividing section. This is the generic subheading that I
     * use throughout the section. */
    @include margin(1, bottom);
}

#reply-title.comment-reply-title {
    // WordPres inserts it, but it is extraenous. 
    display: none !important;
}

/**
 * Individual Comment
 * -----------------------------------------------------------------------------
 * Top-level rules for the comment container.
 */

li.comment {
    box-sizing: border-box;
    list-style-type: none;
    @include flex-parent(row);
    @include padding(1.5 0);

    &:not(:first-of-type) {
        border-top: 1px solid palette(black, x-light);
    }
}

/**
 * Comment Header, Footer and Content Interior
 * -----------------------------------------------------------------------------
 */

li.comment header {
    font-weight: bold;
    @include flex-parent(row);

    @include media(portrait) {
        @include flex-parent(column);
        @include margin(0.5, bottom);
    }

    p {
        @include flex-child(1);

        &.date {
            text-align: right;

            @include media(portrait) {
                text-align: left;
            }
        }
    }
}

li.comment footer p {
    margin: 0; 
}

li.comment .comment-interior {
    @include flex-child(1);
}

/**
 * Focused Comment
 * -----------------------------------------------------------------------------
 * Currently selected comment, determined by clicking.
 */

.focused-comment {
    /* Focused comment expands to either side, but the content within remains
     * unchanged */
    $comment-padding: 15px;

    border: 0;
    width: calc(100% + #{$comment-padding} * 2);
    @include padding(1.5 0);
    @include relative(-$comment-padding, left);
}

/**
 * Comment Input Form
 * -----------------------------------------------------------------------------
 * All input styles for the commentform.
 */

#commentform {
    input,textarea {
        @extend %input-border;
        @include padding(0.5);

        @include placeholder-style() {
            font-size: inherit;
        }
    }

    p, input {
        @extend small;
    }

    p {
        @include margin(1, bottom);
    }

    textarea {
        @include height(20);
    }

    input[type=submit] {
        @include height(3);
        @include rem(max-width, 15);
        @include padding(0.5, bottom);
    }
}

.commentform-inputs {
    // Wrapper container for the inputs on the commentform.
    @include margin(1, bottom);

    @include columns(flex, input, 3, 2) {
        @include media($b-640) {
            width: 100%;
            @include margin(1, bottom);
        }
    }

    @include media($b-640) {
        display: block;
        margin: 0;
    }
}
