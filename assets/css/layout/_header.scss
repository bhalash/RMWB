/**
 * Theme Header
 * -----------------------------------------------------------------------------
 * @category   Stylesheet
 * @package    Sheepie
 * @author     Mark Grealish <mark@bhalash.com>
 * @copyright  Copyright (c) 2015 Mark Grealish
 * @license    https://www.gnu.org/copyleft/gpl.html The GNU GPL v3.0
 * @version    3.0
 * @link       https://github.com/bhalash/sheepie
 */

/**
 * Sidebar Interior Element Defaults
 * -----------------------------------------------------------------------------
 * External rules for the header container are set in _containers.css. All rules
 * in this stylesheet are for elements /internal/ to #header.
 */

.navbar {
    /**
     * Content Wrapper
     * -------------------------------------------------------------------------
     * Push in child content and direct it to the bottom. Used to absolutely 
     * position in IE9.
     */

    &__contentwrap {
        box-sizing: border-box;
        // Stops weird problems with IE.
        overflow: hidden;
        z-index: 2;

        @include navbar-size;
        @include padding(2);

        @include navbar-size-1024 {
            @include padding(0 $navbar-height--collapsed * 0.25);
        }
    }

    /**
     * Navbar Content
     * -------------------------------------------------------------------------
     * Title, menu, social links, and more all go in here. This is a vertical
     * flex layout, with the content pushed to the bottom. The same content is
     * absolutely positioned in IE9.
     */

    &__content {
        height: 100%;
        @include flex-parent(column, flex-end);

        @include media(large) {
            @include flex-parent(row, justify-content);
        }
    }

    /**
     * Sidebar Child Elements
     * -------------------------------------------------------------------------
     * Most elements here are generated dynamically by WordPrss.
     */

    &__child {
        color: palette(white, x-light);

        &:not(:last-child) {
            @include margin($vspace, bottom);

            @include media(large) {
                margin: 0;
            }
        }

        a {
            color: inherit;
            letter-spacing: 1.5px;
        }
    }

    /**
     * Site Title Wrapper and title
     * -------------------------------------------------------------------------
     */

    &__titlewrapper {
        @include flex-child(0 1 auto);

        @include media(large) {
            @include flex-child(0 1 60%, initial, 2);
            text-align: center;
        }

        @include media(small) {
            @include flex-child(1);
            text-align: left;
        }
    }
    
    &__title {
        line-height: 120%;

        @include media(large) {
            @include font-size(3);
            @include line-height($navbar-height--collapsed);
        }
    }

    &__title-link {
        display: block;
        font-weight: 400;
        height: 100%;
    }

    /**
     * Site Description
     * -------------------------------------------------------------------------
     */

    &__description {
        @include flex-child(0 1 auto);

        @include media(large) {
            display: none;
        }
    }

    /**
     * Sidebar Social Media Menu
     * -------------------------------------------------------------------------
     * Horizontal row of external social media links.
     */

    &__social-wrapper {
        @include media(large) {
            // Inherit 3.75rem height in collapsed state.
            height: 100%;
        }
    }

    &__social {
        height: 100%;
        list-style-type: none;
        @include clearfix;
        @include flex-child(0 1 auto);

        @include media(large) {
            @include flex-child(0 1 20%, initial, 1);
            @include rem(min-width, 22);
        }

        @include media(small) {
            display: none;
        }

        .menu-item {
            // WordPress requires menu links to have a text label.
            // This forcibly hides the label in favour of the icon.
            font-size: 0 !important;
            float: left;
            // Override default line-height set for items.
            // Otherwise IE9, 10 and 11 wig out.
            line-height: normal;
            overflow: hidden;
            @include social(100% 1, '.navbar__socialicon');

            @include square-flex(25% 1);

            @include media(large) {
                // Revert to a height-filling state with a fixed rem width.
                // This presents a larger touch target.
                height: 100%;
                padding-bottom: 0;
                @include width($navbar-height--collapsed * 0.5);
            }

            a {
                display: block;
                font-size: inherit;
                height: 100%;
                line-height: inherit;

                @include media(large) {
                    box-sizing: border-box;
                    @include padding($navbar-height--collapsed * 0.25 0);
                }
            }
        }
    }

    /**
     * Social Menu Icon
     * -------------------------------------------------------------------------
     * Icon is deoupled from the parent container.
     */

    &__socialicon {
        // Side is set above in .menu-item.
        display: block;
    }

    /**
     * Sidebar Bottom Buttons
     * -------------------------------------------------------------------------
     */

    &__buttonrow {
        @include flex-child(0 1 auto);
        @include clearfix;
        overflow: hidden;

        @include media(large) {
            @include flex-child(0 1 30%, initial, 3);
            @include rem(min-width, 22);
        }

        @include media(small) {
            @include rem(min-width, 5);
        }
    }
}

/**
 * Lightbox Image
 * -----------------------------------------------------------------------------
 * There is a JavaScript component to determine state, but it is mostly handled
 * through this CSS.
 * 
 * 1. If #lightbox is targeted by a clicked link, make it appear.
 * 2. Otherwise it is hidden.
 * 3. I am working on a way to successfuly freeze the background without 
 *    resorting to JavaScript (I could freeze the body tag, but that requires
 *     JS!).
 */

.lightbox {
    background: palette(black, dark);
    outline: 0;
    z-index: 4;
    transition: opacity .15s;
    @include fixed(0);

    &__anchor {
        @include absolute(0);
    }

    &__image {
        height: initial;
        max-width: 95%;
        max-height: 95%;
        transform: translate(-50%, -50%);
        width: initial;
        @include fixed(50% 50%, left top);
    }
}
